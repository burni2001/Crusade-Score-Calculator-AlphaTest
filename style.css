@import url("https://fonts.googleapis.com/css2?family=VT323&display=swap");

:root {
    --pip-green: #33ff00;
    --pip-dim: #1a8000;
    --bg-color: #050a05;
    --panel-bg: #0c140c;
    --border-color: #1f3a1f;
}

/* --- GLOBAL LAYOUT --- */
body {
    background-color: #000;
    color: var(--pip-green);
    font-family: "VT323", monospace;
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    background-image: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
    );
}

/* --- COGITATOR FRAME (The main box) --- */
.cogitator-frame {
    width: 100%;
    max-width: 1100px;
    background-color: var(--bg-color);
    border: 4px solid #3d4c3d;
    box-sizing: border-box;
    box-shadow: 0 0 20px rgba(51, 255, 0, 0.2), inset 0 0 50px rgba(0, 0, 0, 0.8);
    padding: 20px;
    position: relative;
}
.cogitator-frame::before {
    content: " ";
    display: block;
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
    z-index: 2;
    background-size: 100% 2px, 3px 100%;
    pointer-events: none;
}

/* --- TYPOGRAPHY & HEADER --- */
h1, h2, h3 {
    text-transform: uppercase;
    text-align: center;
    margin: 5px 0;
    text-shadow: 0 0 5px var(--pip-green);
    letter-spacing: 2px;
}
.header-decor {
    border-bottom: 2px solid var(--pip-green);
    margin-bottom: 20px;
    padding-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
}
.header-logo {
    width: 50px;
    height: 50px;
    animation: crt-flicker 8s infinite;
}
@keyframes crt-flicker {
    0%, 95%, 100% { opacity: 1; }
    96% { opacity: 0.4; }
    97% { opacity: 1; }
    98% { opacity: 0.6; }
    99% { opacity: 1; }
}

/* --- CUSTOM COGITATOR LIST (Green Squares) --- */
.cogitator-list {
    list-style: none;        /* Remove default round bullets */
    padding: 0;
    margin: 10px auto;       /* Spacing */
    text-align: left;        /* Keep text left-aligned for readability */
    display: inline-block;   /* Keeps the list block centered on screen */
    max-width: 90%;          /* Prevents it from hitting edges on mobile */
}

.cogitator-list li {
    position: relative;      /* Needed to place the square */
    padding-left: 20px;      /* Space for the square */
    margin-bottom: 6px;      /* Space between lines */
    color: var(--pip-dim);   /* Standard text color */
    line-height: 1.4;
}

/* The Little Green Square */
.cogitator-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 7px;                /* Adjust this to move square up/down */
    width: 6px;              /* Size of the square */
    height: 6px;
    background-color: var(--pip-green); /* Solid Green */
    box-shadow: 0 0 4px var(--pip-green); /* Glowing effect */
}

/* --- INPUTS & UI ELEMENTS --- */
input, select {
    background-color: #000;
    color: var(--pip-green);
    border: 1px solid var(--pip-green);
    font-family: "VT323", monospace;
    font-size: 1.2rem;
    text-align: center;
    padding: 2px;
    width: 100%;
    box-sizing: border-box;
    border-radius: 0;
    -webkit-border-radius: 0; /* Critical for Safari/iOS */
    -webkit-appearance: none; /* Removes default iOS glossy gradient/styling */
    appearance: none;         /* Standard property */
}
input:focus, select:focus {
    outline: none;
    box-shadow: 0 0 8px var(--pip-green);
    background-color: #0f240f;
}
input::-webkit-outer-spin-button, input::-webkit-inner-spin-button {
    -webkit-appearance: none; margin: 0;
}
input[type="number"] { -moz-appearance: textfield; }
select option { background-color: #000; color: #0f0; }

.section {
    background-color: rgba(20, 40, 20, 0.3);
    border: 1px solid var(--border-color);
    padding: 15px;
    margin-bottom: 20px;
}
.section-header {
    background-color: #000;
    color: var(--pip-green);
    padding: 5px;
    font-weight: bold;
    text-align: center;
    margin-bottom: 15px;
    border: 1px solid var(--pip-green);
}
.divider-line {
    border-top: 1px solid var(--pip-dim);
    margin: 25px 0;
    width: 100%;
}

/* --- DASHBOARD LAYOUT (The Side-by-Side Logic) --- */
/* 1. The Wrapper: Force side-by-side (no wrap) */
.dashboard-wrapper {
    display: flex;
    flex-wrap: nowrap;     /* <--- CRITICAL: Never stack */
    gap: 10px;
    align-items: stretch;
    width: 100%;
}

/* 2. The Panels: Allow shrinking to 0 so they fit on phones */
.mission-panel, .modifiers-panel {
    flex: 1;
    min-width: 0;          /* <--- CRITICAL: Allows shrinking */
    display: flex;
    flex-direction: column;
}

/* 3. Mission Params (Left): Fluid Grid */
.mission-params {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
    gap: 25px;
    align-items: center;
    min-height: 32px; 
    margin-bottom: 8px; 
}
.mission-params label {
    text-align: left;
    margin: 0;
    font-size: 1.1rem;
    opacity: 0.9;
    white-space: normal;
    line-height: 1.1;
}
.mission-params input, .mission-params select {
    width: 100%;
    height: 100%;
    font-size: 1.1rem;
}

/* 4. Modifiers (Right): Fluid Grid */
.mod-grid-clean {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: repeat(6, 32px);
    row-gap: 8px; 
    column-gap: 15px; /* Slightly tighter than desktop default */
}
.mod-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
    gap: 5px;
}
.mod-row label {
    text-align: left;
    font-size: 1rem;
    opacity: 0.9;
    flex: 1;
    white-space: nowrap;
}
.mod-row input {
    width: 60px;
    flex: 0 0 auto;
    min-width: 0;
    height: 30px;
    text-align: center;
    background-color: #000;
    border: 1px solid var(--pip-dim);
    color: var(--pip-green);
}

/* --- IMPORT & TABLE SECTIONS --- */
.results-container { display: none; }
.results-container.visible { display: block; }

.panels-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}

.stat-panel {
    background-color: rgba(20, 40, 20, 0.3);
    border: 1px solid var(--border-color);
    padding: 15px;
}
.stat-panel h3 {
    margin: 0 0 10px 0;
    font-size: 1.1rem;
    border-bottom: 1px solid var(--pip-dim);
    padding-bottom: 5px;
    color: #fff;
    text-transform: uppercase;
}
.kv-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
    font-size: 1.1rem;
}

/* --- SCORE TABLES --- */
.score-table-container { width: 100%; overflow-x: auto; display: block; }
.score-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 5px;
    table-layout: fixed;
}
.score-table th, .score-table td {
    border: 1px solid var(--border-color);
    background-color: var(--panel-bg);
    padding: 4px;
    vertical-align: middle;
}
.score-table th { background-color: #000; padding: 10px; }
.score-table th.empty-header { border: none; background: transparent; }

/* Column Widths */
.row-label { width: 180px; text-align: right; background-color: #000; font-weight: bold; padding-right: 15px !important;}
.input-cell { width: 120px; }
.total-cell { width: 120px; text-align: center; font-weight: bold; background-color: #000; }

/* Score Highlights */
.base-score-row td, .mod-score-row td { font-weight: bold; text-align: center; }
.base-score-row td.row-label, .mod-score-row td.row-label { text-align: right !important; }
.final-score-row td {
    border-top: 2px solid var(--pip-green);
    border-bottom: 2px double var(--pip-green);
    font-size: 1.5rem;
    font-weight: bold;
    color: #afffa6;
    text-align: center;
    padding: 15px 0;
    text-shadow: 0 0 8px var(--pip-green);
}

/* Fix clipping for long table headers like "Incapacitations" */
    .cogitator-table th, 
    .performance-table th {
        white-space: normal !important; /* Allow text to wrap to next line */
        word-wrap: break-word !important; /* Force long words to break if needed */
        padding: 4px 2px !important;    /* Reduce side padding to make room */
        font-size: 0.7rem !important;   /* Slightly smaller font for headers */
        vertical-align: middle;         /* Keep it centered vertically */
        line-height: 1.1;               /* Tighten line height for wrapped text */
    }

/* --- EXPORT BUTTONS --- */
.export-buttons-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 25px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}
.export-buttons-container button {
    background-color: var(--panel-bg);
    color: var(--pip-green);
    border: 1px solid var(--pip-green);
    padding: 10px 20px;
    font-family: "VT323", monospace;
    font-size: 1.1rem;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 0 5px rgba(51, 255, 0, 0.2);
    flex: 1 1 auto;
    min-width: 180px;
}
.export-buttons-container button:hover {
    background-color: var(--pip-green);
    color: var(--bg-color);
    box-shadow: 0 0 15px var(--pip-green);
}
.export-buttons-container button.danger-btn { border-color: #ff6600; color: #ff6600; }
.export-buttons-container button.danger-btn:hover { background-color: #ff6600; color: var(--bg-color); box-shadow: 0 0 15px #ff6600; }

/* --- PRIMARY ACTION BUTTONS (High Specificity Fix) --- */

/* Target specific modals + generic class to override defaults */
#ocr-modal-overlay .ocr-modal-buttons button.btn-primary,
#import-wrapper button.btn-primary,
button.btn-primary {
    background-color: #33ff00 !important; /* Force solid green (Hex) */
    background-image: none !important;    /* Remove any dark gradients/textures */
    color: #000000 !important;            /* Black Text */
    border: 1px solid #33ff00 !important;
    font-weight: 900 !important;
    text-shadow: none !important;         /* Remove text glow for better contrast */
    box-shadow: 0 0 15px rgba(51, 255, 0, 0.6);
    opacity: 1 !important;
}

/* HOVER EFFECT */
#ocr-modal-overlay .ocr-modal-buttons button.btn-primary:hover,
#import-wrapper button.btn-primary:hover,
button.btn-primary:hover {
    background-color: #000000 !important; /* Black Background */
    color: #33ff00 !important;            /* Green Text */
    box-shadow: 0 0 20px #33ff00, inset 0 0 10px rgba(51,255,0,0.3);
    cursor: pointer;
}

/* --- UTILS (Modals, Credits) --- */
.ocr-modal-overlay, .modal-overlay {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.9); z-index: 1000; justify-content: center; align-items: center;
    padding: 20px;
}
.ocr-modal-overlay.active, .modal-overlay.active { display: flex; }

.ocr-modal, .modal-content {
    background: var(--bg-color);
    border: 2px solid var(--pip-green);
    box-shadow: 0 0 30px rgba(51, 255, 0, 0.3);
    width: 100%;
    max-width: 95vw;
    max-height: 90vh;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
}
.ocr-detected-grid { 
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 20px; /* Increased from 10px to create distinct gaps */
}
.ocr-detected-item { display: flex; justify-content: space-between; align-items: center; background: rgba(51,255,0,0.1); padding: 8px; border: 1px solid var(--border-color); }
.ocr-input {
    background: #0a1f0a;
    border: 1px solid var(--border-color);
    color: #afffa6;
    font-family: inherit;
    width: 100%;        /* Fill available space */
    max-width: 140px;   /* Cap at desktop size */
    min-width: 60px;    /* Allow shrinking down to this size */
}
.ocr-stats-row { 
    display: grid; 
    grid-template-columns: repeat(2, 1fr); 
    gap: 15px;        /* More space between Stat boxes */
    margin-top: 25px; /* Creates a clear visual break before the stats start */
}
.ocr-stats-row .ocr-input { width: 100%; }
.ocr-modal-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
    flex-wrap: wrap;
}

.ocr-raw-text {
    background-color: #000;
    border: 1px solid var(--border-color);
    padding: 10px;
    max-height: 150px;
    overflow-y: auto;
    font-size: 0.9rem;
    white-space: pre-wrap;  /* Wraps text to next line */
    word-break: break-word; /* Forces long unbroken words to break */
    margin-top: 10px;
}

/* --- OCR MODAL BUTTON STYLES --- */

/* Base style for all OCR buttons (Apply, Export, Cancel) */
.ocr-modal-buttons button {
    background-color: var(--panel-bg) !important; /* !important overrides inline HTML styles */
    color: var(--pip-green);
    border: 1px solid var(--pip-green);
    padding: 10px 20px;
    font-family: "VT323", monospace;
    font-size: 1.1rem;
    cursor: pointer;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 0 5px rgba(51, 255, 0, 0.2);
    min-width: 140px; /* Ensures they aren't too skinny on desktop */
}

/* Hover effect: Glow green */
.ocr-modal-buttons button:hover {
    background-color: var(--pip-green) !important;
    color: var(--bg-color);
    box-shadow: 0 0 15px var(--pip-green);
}

/* Specific styling for the 'Cancel' button (Danger/Orange) */
.ocr-modal-buttons .cancel-btn {
    border-color: #ff6600;
    color: #ff6600;
}

/* Hover effect for Cancel: Glow Orange */
.ocr-modal-buttons .cancel-btn:hover {
    background-color: #ff6600 !important;
    color: var(--bg-color);
    box-shadow: 0 0 15px #ff6600;
}

/* Update the main container to ensure padding doesn't break layout */
.credits-full {
    padding: 20px;
    margin-top: 30px;
    text-align: center;
    width: 100%;
    max-width: 1100px;
    box-sizing: border-box; /* Added this from v2.08 */
}

/* Update title to be uppercase with spacing */
.credits-full .title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #afffa6;
    margin-bottom: 15px;
    text-transform: uppercase; /* Added */
    letter-spacing: 2px;       /* Added */
}

/* Row styling remains similar */
.credits-full .credit-row {
    margin: 8px 0;
    font-size: 0.95rem;
}

/* NEW: Add specific color for the Role (Development, etc.) */
.credits-full .role {
    color: #1a8000;
}

/* NEW: Add specific color for the Name */
.credits-full .name {
    color: #33ff00;
}

/* NEW: Add styling for the bottom copyright section with the line separator */
.credits-full .copyright {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #1f3a1f;
    font-size: 0.85rem;
    opacity: 0.7;
}

/* Update link styling to include hover glow */
.credits-full a {
    color: #afffa6;
    text-decoration: none;
}
.credits-full a:hover {
    color: #33ff00;
    text-shadow: 0 0 5px #33ff00;
}

/* --- TRANSMISSION LOG & MODAL FIXES --- */

/* 1. Fix Transmission Log Responsiveness */
#copy-modal .modal-content {
    background-color: var(--bg-color) !important;
    border: 2px solid var(--pip-green) !important;
    box-shadow: 0 0 30px rgba(51, 255, 0, 0.15), inset 0 0 20px rgba(0, 0, 0, 0.8);
    color: var(--pip-green);
    
    /* Responsive Fixes */
    width: 100%;           /* Try to fill width */
    max-width: 700px;      /* But stop at 700px */
    width: 90vw;           /* Mobile Safety: Never wider than 90% of screen width */
    box-sizing: border-box;/* Critical: Includes padding in width calculation so it doesn't clip */
    margin: auto;          /* Force Center */
}

/* 2. Fix OCR Overlay Alignment (Force Center) */
.ocr-modal, .modal-content {
    margin: 0 auto;        /* This forces the box to the center of the flex container */
    box-sizing: border-box; /* Prevents padding from pushing it off-screen */
}

/* Ensure the Text Area looks good */
#copy-text {
    background-color: #0a0f0a !important; 
    color: #afffa6 !important;            
    font-family: "VT323", monospace;
    font-size: 1.2rem;
    border: 1px solid var(--pip-dim);
    padding: 15px;
    width: 100%;
    min-height: 400px; 
    box-sizing: border-box; /* Keeps text inside the box */
    margin-bottom: 10px;
    resize: vertical;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
    white-space: pre-wrap; /* Ensures long text wraps instead of breaking layout */
}

/* --- UNIVERSAL MODAL CENTERING FIX --- */

/* 1. Target BOTH Overlay Backgrounds */
#ocr-modal-overlay,
#copy-modal,
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.85);
    z-index: 2000;
    
    /* CRITICAL: Use Flexbox to center the child (the green window) */
    display: none; /* Hidden by default */
    justify-content: center; /* Center Horizontally */
    align-items: center;     /* Center Vertically */
}

/* 2. When 'active', force them to be FLEX containers (not block) */
#ocr-modal-overlay.active,
#copy-modal.active,
.modal-overlay.active {
    display: flex !important;
}

/* 3. Target the Actual Windows (The Green Boxes) */
.ocr-modal,
#copy-modal .modal-content {
    /* Reset margins so Flexbox can do its job */
    margin: 0 !important; 
    
    /* Ensure they don't touch the screen edges on mobile */
    max-width: 700px;
    width: 90%;
    max-height: 90vh; /* Prevent tall windows from getting cut off */
    overflow-y: auto; /* Scroll inside the window if needed */
    box-sizing: border-box;
}

/* --- INTERNAL DATA BANK STYLING --- */
.data-bank-display {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
    
    /* SEPARATION FROM BUTTONS ABOVE */
    margin-top: 20px;            /* The Gap */
    padding-top: 20px;           /* Breathing room for the line */
    border-top: 1px solid rgba(51, 255, 0, 0.3); /* The Line */
}

.data-slot {
    background-color: rgba(0, 20, 0, 0.6);
    border: 1px solid var(--pip-dim);
    padding: 8px 12px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 120px;
    justify-content: space-between;
    font-family: "VT323", monospace;
    font-size: 1rem;
    color: var(--pip-dim);
    transition: all 0.3s ease;
}

.data-slot.occupied {
    border-color: var(--pip-green);
    background-color: rgba(51, 255, 0, 0.15);
    color: #afffa6;
    box-shadow: 0 0 5px rgba(51, 255, 0, 0.2);
}

.data-slot .slot-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
}

.delete-slot-btn {
    background: none;
    border: none;
    color: #ff5555;
    font-weight: bold;
    cursor: pointer;
    font-size: 1.1rem;
    padding: 0 5px;
    opacity: 0.7;
}

.delete-slot-btn:hover {
    opacity: 1;
    text-shadow: 0 0 5px #ff0000;
}

/* Mobile tweak for slots */
@media (max-width: 768px) {
    .data-bank-display {
        flex-direction: column;
    }
    .data-slot {
        width: 100%;
        box-sizing: border-box;
    }
}

/* ========================================= */
/* === SINGLE UNIFIED MOBILE MEDIA QUERY === */
/* ========================================= */
@media (max-width: 768px) {
    /* 1. Global Frame & Body Adjustments */
    body { padding: 5px; }
    .cogitator-frame { 
        padding: 10px; 
        border-width: 2px;
    }
    
    /* 2. Header & Typography */
    .header-decor { flex-direction: column; align-items: center; text-align: center; }
    h1 { font-size: 1.4rem; }
    .section-header { font-size: 0.9rem; }

    /* 3. Main Dashboard Layout */
    .dashboard-wrapper { gap: 4px; }
    .mission-params { gap: 2px; }
    
    .mission-params label, 
    .mod-row label, 
    .mission-params input, 
    .mission-params select, 
    .mod-row input {
        font-size: 0.8rem; 
    }
    /* Force text centering on iOS */
    select { 
        text-align: center;
        text-align-last: center; /* <--- THIS IS THE MAGIC FIX FOR iPHONE */
        text-indent: 0px; 
        padding-left: 0px; 
    }

    /* 4. Modifiers Section (Stacking) */
    .mod-grid-clean {
        grid-template-columns: 1fr;
        grid-template-rows: auto;
        row-gap: 2px;
        column-gap: 0;
    }
    .mod-row { height: 22px; }
    .mod-row label { font-size: 0.85rem; margin: 0; }
    .mod-row input { height: 20px; font-size: 0.9rem; padding: 0; }

    /* 5. Squad Matrix Table */
    .row-label {
        font-size: 0.75rem;
        padding-right: 5px !important;
        white-space: normal;
        line-height: 1.1;
    }

    /* 6. Import Section & Buttons */
    .panels-wrapper { grid-template-columns: 1fr; }
    .export-buttons-container { flex-direction: column; gap: 10px; }
    .export-buttons-container button { width: 100%; }
    
    /* Fix for the main file upload button */
    #screenshot-upload {
        width: 100% !important;
        box-sizing: border-box;
    }

    /* ========================================= */
    /* === CRITICAL OCR FIXES === */
    /* ========================================= */
    
    /* Give the modal wrapper breathing room */
    .ocr-modal-overlay { 
        padding: 5px; 
    }
    
    /* Ensure the modal itself doesn't overflow */
    .ocr-modal {
        max-width: 95vw; /* Never wider than 95% of viewport */
        padding: 10px;   /* Reduce internal padding */
    }

    /* Force the Main Grid to 1 Column */
    .ocr-detected-grid { 
        grid-template-columns: 1fr !important; 
    }

    /* Fix the Stats Rows (Kills, Deaths, etc.) */
    .ocr-stats-row {
        /* minmax(0, 1fr) is CRITICAL. It allows columns to shrink below content size. */
        grid-template-columns: repeat(2, minmax(0, 1fr)); 
        gap: 5px;
    }

    /* Fix the Individual Items (Label + Input boxes) */
    .ocr-detected-item {
        flex-direction: column; 
        align-items: stretch;
        gap: 2px;
        /* OVERRIDE: Reduce the 12px desktop padding to 4px. This saves ~16px width per box. */
        padding: 6px 4px !important; 
    }

    /* FORCE ALL INPUTS TO SHRINK */
    /* We use !important to crush the desktop "140px" width rule */
    .ocr-input, 
    .ocr-input[type="number"],
    .ocr-select {
        width: 100% !important;
        min-width: 0 !important;
        max-width: 100% !important;
        box-sizing: border-box;
        font-size: 0.9rem; /* Slightly smaller text prevents expansion */
    }

    /* Stack the Action Buttons */
    .ocr-modal-buttons {
        flex-direction: column;
        gap: 10px;
    }
    .ocr-modal-buttons button {
        width: 100%;
        margin: 0;
    }

    /* ========================================= */
    /* === TRANSMISSION LOG MOBILE FIXES === */
    /* ========================================= */

    /* 1. Force the Overlay to be a Flex Container (Centers content) */
    #copy-modal.active,
    .modal-overlay.active {
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        padding: 15px !important; /* Safety padding from screen edges */
        box-sizing: border-box !important;
    }

    /* 2. Force the Window to Center and Size Correctly */
    #copy-modal .modal-content {
        margin: 0 !important;       /* Kill any auto margins drifting right */
        width: 100% !important;     /* Fill the available padded space */
        max-width: 100% !important; 
        left: auto !important;      /* Kill absolute positioning */
        right: auto !important;
        transform: none !important; /* Kill centering transforms */
    }
}
